<div class="border-2 w-3/4 flex flex-row items-center rounded mb-8" id="image-input">
  <% if image.attached? %>
    <%= image_tag image, class: 'w-1/3' %>
  <% else %>
    <%= image_tag image_placeholder_path, class: 'w-1/3' %>
  <% end %>
  <div>
    <div class="px-2 mb-2 text-gray-500"> <%= placeholder %></div>
    <%= form.file_field form_field, autocomplete: form_field.to_s, placeholder: placeholder, accept: "image/*", class: 'block w-full px-2 py-1hover:border-yellow-200 focus:outline-yellow-200 focus:bg-yellow-50', onchange:"setImagePreview(this);" %>
  </div>
</div>

<script>
  function setImagePreview (input) {
    const imageElement = input.parentElement.parentElement.children[0];
    const reader = new FileReader();
    reader.onload = function (e) {
      imageElement.src = e.target.result
    };

    if (input.files && input.files[0]) {
      reader.readAsDataURL(input.files[0]);
    }
  }
</script>